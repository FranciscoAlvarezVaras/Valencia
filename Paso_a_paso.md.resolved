# Valenbisi Data Pipeline - Walkthrough

¬°Bienvenido a tu nueva pipeline de datos para Valenbisi! Este proyecto automatiza la recolecci√≥n, almacenamiento, transformaci√≥n y visualizaci√≥n de datos de bicicletas p√∫blicas en Valencia.

## üèóÔ∏è Arquitectura del Sistema

El sistema est√° compuesto por 6 servicios Docker interconectados:

1.  **Collector**: Script Python que consulta la API de Valenbisi cada 5 minutos.
2.  **PostgreSQL**: Base de datos relacional para almacenamiento hist√≥rico seguro y robusto.
3.  **MongoDB**: Base de datos NoSQL para almacenamiento flexible y series temporales.
4.  **DBT (Data Build Tool)**: Realiza transformaciones de datos (limpieza, agregaciones por hora/d√≠a).
5.  **Dashboard (Streamlit)**: Interfaz web interactiva para visualizar los datos.
6.  **Mongo Express**: Interfaz web para administrar MongoDB.

## üöÄ C√≥mo Ejecutar el Proyecto

Todo el sistema est√° contenerizado con Docker Compose.

1.  **Iniciar el sisteama**:
    Abre una terminal en la carpeta del proyecto y ejecuta:
    ```bash
    docker compose up -d
    ```
    *(La primera vez puede tardar unos minutos en construir las im√°genes)*

2.  **Verificar estado**:
    ```bash
    docker compose ps
    ```
    Todos los servicios deber√≠an estar en estado `Up` (y PostgreSQL `healthy`).

## üåê Servicios Disponibles

Una vez iniciado, puedes acceder a las siguientes interfaces:

### üìä Dashboard de Datos
- **URL**: [http://localhost:8501](http://localhost:8501)
- **Qu√© ver√°s**: Mapa en tiempo real, KPIs globales, gr√°ficos de tendencias horarias.

### üçÉ Administraci√≥n MongoDB (Mongo Express)
- **URL**: [http://localhost:8081](http://localhost:8081)
- **Credenciales**: admin / pass (o las configuradas en docker-compose)
- **Uso**: Explora las colecciones `latest_status` y `station_status`.

### üêò Base de Datos PostgreSQL
- **Host**: localhost
- **Puerto**: 5432
- **Usuario/Pass**: postgres / postgres
- **Base de datos**: valenbisi

## üõ†Ô∏è Desarrollo y Mantenimiento

### Ejecutar transformaciones DBT manualmente
Si quieres forzar una actualizaci√≥n de las tablas agregadas:
```bash
docker compose run --rm dbt dbt run --profiles-dir .
```

### Ver logs del colector
Para ver si est√° recolectando datos correctamente:
```bash
docker compose logs -f collector
```

## üìÇ Estructura del Proyecto

- `/collector`: C√≥digo del script de recolecci√≥n Python.
- `/valenbisi_dbt`: Proyecto DBT con modelos SQL.
- `/dashboard`: C√≥digo de la aplicaci√≥n Streamlit.
- `docker-compose.yml`: Orquestator de todos los servicios.
- `init_db.sql` / `mongo_init.js`: Scripts de inicializaci√≥n de bases de datos.
